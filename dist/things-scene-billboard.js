!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@hatiolab/things-scene")):"function"==typeof define&&define.amd?define(["exports","@hatiolab/things-scene"],t):t((e=e||self)["things-scene-billboard"]={},e.scene)}(this,function(exports,thingsScene){"use strict";const NATURE={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"textarea",label:"config",name:"config"}]};class Billboard extends thingsScene.HTMLOverlayContainer{oncreate_element(e){this._anchor=document.createElement("div"),this._anchor.style.width="100%",this._anchor.style.height="100%",this.element.appendChild(this._anchor),thingsScene.ScriptLoader.load(["https://d3js.org/d3.v4.min.js","https://naver.github.io/billboard.js/release/latest/dist/billboard.min.js"],["https://naver.github.io/billboard.js/release/latest/dist/billboard.min.css"]).then(()=>{requestAnimationFrame(()=>{this.chart=bb.generate({bindto:this._anchor,data:Object.assign({},this.config,{columns:this.data})}),this.reposition()})},thingsScene.error)}dispose(){this.chart&&this.chart.destroy(),delete this.chart,delete this._anchor,super.dispose()}setElementProperties(e){}reposition(){super.reposition(),this.chart&&this.chart.load({columns:this.data})}get config(){var{config:config,data:data}=this.state;if("object"!=typeof config)try{eval(`config = ${config}`)}catch(e){thingsScene.error(e)}return config}get tagName(){return"div"}get nature(){return NATURE}}thingsScene.Component.register("billboard",Billboard),exports.Billboard=Billboard,Object.defineProperty(exports,"__esModule",{value:!0})});
